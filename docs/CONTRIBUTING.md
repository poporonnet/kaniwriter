# コントリビューションガイド

<details>
<summary>目次</summary>

- [コントリビューションガイド](#コントリビューションガイド)
  - [はじめにすること](#はじめにすること)
  - [Issueの作成方法](#issueの作成方法)
    - [あなたが開発メンバーではない場合](#あなたが開発メンバーではない場合)
    - [タイトル](#タイトル)
    - [本文](#本文)
  - [開発の流れ](#開発の流れ)
  - [ブランチ/コミット/Issue/プルリクエストの命名規則](#ブランチコミットissueプルリクエストの命名規則)
    - [基本](#基本)
    - [ブランチ名](#ブランチ名)
    - [コミットメッセージ](#コミットメッセージ)
    - [Issueタイトル](#issueタイトル)
    - [プルリクエスト](#プルリクエスト)
  - [プルリクエストの作成方法](#プルリクエストの作成方法)
    - [タイトル](#タイトル-1)
    - [本文](#本文-1)
    - [諸設定](#諸設定)

</details>

## はじめにすること

1. リポジトリをクローンする
   ```bash
   git clone https://github.com/poporonnet/kaniwriter.git
   ```
2. [環境構築](DEVELOPMENT.md#環境構築-初回のみ)を行う

## Issueの作成方法

### あなたが開発メンバーではない場合

kaniwriterはあなたのIssueを歓迎します！

- **フィードバック**: バグ報告、機能提案、改善案など
- **質問**: kaniwriterの使い方、コードベースの疑問点など
- **コードベースへの貢献**: 新機能の実装、または既存のIssueに取り組む

以下に続く命名規則やルールは主に開発メンバー向けであり、すべてを無理に守ろうとする必要はありません。
また、質問や問題が急を要する場合、[@poporonnet/kaniwriter-maintainer](https://github.com/orgs/poporonnet/teams/kaniwriter-maintainer) をメンションしてもらうと通常よりも早くメンテナーが反応できるかもしれません ( 保証はできません )。

### タイトル

Issue タイトルは Conventional Commits に従います (詳しくは[下記](#ブランチコミットissueプルリクエストの命名規則))。

### 本文

Issue 本文には、基本的に**背景・到達目標・行うこと**を必要十分に書きます。

- 新機能 (`feat`) の場合: それぞれ、その機能が必要である理由・機能の概要・実装方法に対応します。
- 修正 (`fix`) の場合: それぞれ、不具合の内容・実現すべき挙動・修正方法に対応します。

必ず埋める必要はなく、タイトルから自明な場合などには項目を省略しても構いません。
また、可能なら適切なラベルをつけてください。

## 開発の流れ

1. ローカルリポジトリを最新の状態にする

   ```bash
   git pull
   ```

2. ブランチを作る

   ```bash
   git switch -c ブランチ名
   ```

   - **ブランチ名は Conventional Commits に従います (詳しくは[下記](#ブランチコミットissueプルリクエストの命名規則))**。

3. リポジトリに変更を加える
4. 変更をステージしてコミットする

   ```bash
   git add ファイル名
   git commit -m "コミットメッセージ"
   ```

   - **コミットメッセージは Conventional Commits に従います (詳しくは[下記](#ブランチコミットissueプルリクエストの命名規則))**。
   - コミットはこまめに、かつ簡潔に説明できる単位でで行うことを推奨します。

5. リモートにプッシュする
   ```bash
   git push
   ```

6. プルリクエストを作成する
   - **コミットメッセージは Conventional Commits に従います (詳しくは[下記](#ブランチコミットissueプルリクエストの命名規則))**。
   - [プルリクエストの作成方法](#プルリクエストの作成方法)を参照してください。

## ブランチ/コミット/Issue/プルリクエストの命名規則

### 基本

基本的に、
```
<type>: <description>
```
のようなフォーマットに従う必要があります (参考: [Conventional Commits](https://www.conventionalcommits.org/ja/v1.0.0) )。
`<type>:`の後には半角スペースが1つ必要です。

`type`は以下に示す文字列です。

|   `type`   | 概要                                            |
| :--------: | :---------------------------------------------- |
|   `feat`   | **ユーザに影響する**機能の追加                  |
|   `fix`    | バグを含む想定通りでない動作の修正            |
|  `chore`   | **ユーザに影響しない**軽微な変更                |
| `refactor` | リファクタリング (動作を変更しないコードの改善) |
|   `docs`   | ドキュメントに関連する作業                      |

`description`には変更を説明する簡潔な文章を書きます。

### ブランチ名

ブランチ名は、
```
<type>/<issue-number>-<description>
```
というフォーマットに従います。
`issue-number`は、対象とするIssueの番号です。
`description`は、ハイフン区切り(ケバブケース)の、英語で書かれた説明です。

- 例: `feat/95-show-warning-on-unsupported-browsers`
  - 「95番のIssueに関連する、非対応のブラウザで警告を出すという機能の追加」という内容であることを伝えることができます。

### コミットメッセージ

コミットメッセージは、
```
<type>: <description>
<body>
```
というフォーマットに従います。
`body`は2行目以降に追加で書く説明で、省略することが可能です。

- 例:
  - `feat: ライトモードとダークモードを切り替えるボタンを追加`
  - ```
    fix: レンダリングがループしてしまう問題を修正
    依存リストに毎回変更されるオブジェクトを渡していたため
    ```
  - `chore: typoを修正`

### Issueタイトル

Issueタイトルは、基本のフォーマットと同じものに従います。

- 例:
  - `feat: ライトモードとダークモードを切り替えるボタン`
  - `fix: トップページのレンダリング負荷が高い`

### プルリクエスト

プルリクエストタイトルは、基本のフォーマットと同じものに従います。
[プルリクエストの作成方法](#プルリクエストの作成方法)も併せて参照してください。

## プルリクエストの作成方法

### タイトル

プルリクエストタイトルはリリースノートに記載されます。そのため、ユーザに変更を説明するつもりで書くことが望ましいです。自然とレビュワーも見やすいタイトルになります。

- 例:
  - 👎`fix: トップページのレンダリングバグを修正`
    - 「レンダリングバグ」が何をさすのか良くわかりません。
  - 👍`fix: トップページの負荷が高くなる問題を修正`
    - 解決した問題がより簡潔にわかります。また、ユーザにも伝わりやすいです。

### 本文

**本文の1行目に`close #Issue番号`と書いてください**。関連するIssueを紐づけることができます。
2行目以降には、やったこと・できていないこと・レビュワーに伝えたいことなどをある程度詳しく書いてください。

### 諸設定

- Assigneesに自分を設定してください。
- Reviewersは、設定しても、空でも構いません。
- 可能なら、適切なラベルを設定してください。空でも構いません。
- (作成後) Auto Merge を Squash で有効化してください。
